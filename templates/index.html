<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NabiSystem - Ultra VIP API</title>
    <style>
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
            font-family: "Segoe UI", "Arial", sans-serif;
            background: #0a0a0a;
            color:#fff;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            min-height:100vh;
            position: relative;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            z-index: -1;
        }
        .container{max-width:1200px;margin:0 auto;padding:28px}
        .header{text-align:center;padding:32px 0}
        .logo{
            font-size:3.4rem;font-weight:800;margin-bottom:8px;
            background:linear-gradient(45deg,#ff6b6b,#feca57,#48dbfb,#ff9ff3);
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            text-shadow:0 0 24px rgba(255,255,255,0.08);
            display:inline-block;animation:glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow{
            from{text-shadow:0 0 14px #fff,0 0 20px #ff4da6}
            to{text-shadow:0 0 24px #fff,0 0 34px #ff4da6}
        }
        .subtitle{opacity:.75;margin-top:6px;font-size:1rem;color:#aaa}
        .warning-box{
            background:rgba(255,255,255,0.05);backdrop-filter:blur(12px);
            border:1px solid rgba(255,255,255,0.1);border-radius:14px;padding:18px;margin:20px 0;text-align:center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        /* form */
        .api-form{
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius:18px;
            padding:28px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.25);
            backdrop-filter: blur(10px);
        }
        .form-row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
        .form-input{
            flex:1; min-width:220px;
            padding:14px 18px;border-radius:50px;border:none;font-size:15px;
            background:rgba(255,255,255,0.08);color:#fff;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            background: rgba(255,255,255,0.12);
            border-color: rgba(255,255,255,0.2);
            box-shadow: 0 0 0 2px rgba(120, 119, 198, 0.3);
        }
        .form-input::placeholder {
            color: #aaa;
        }
        .btn{
            display:inline-flex;align-items:center;gap:10px;
            background:linear-gradient(45deg,#ff6b6b,#feca57);color:#111;border:none;
            padding:12px 24px;border-radius:999px;font-weight:700;cursor:pointer;
            transition:transform .16s ease,box-shadow .16s ease;
            box-shadow: 0 4px 15px rgba(255,107,107,0.3);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,107,107,0.4);
        }
        .btn:active{transform:translateY(1px)}
        .btn.secondary{background:linear-gradient(45deg,#48dbfb,#ff9ff3);color:#111;box-shadow: 0 4px 15px rgba(72,219,251,0.3);}
        .btn.secondary:hover {
            box-shadow: 0 6px 20px rgba(72,219,251,0.4);
        }

        /* result */
        .result-box{
            display:none;background:rgba(255,255,255,0.05);color:#fff;border-radius:12px;padding:18px;margin-top:18px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow:0 12px 30px rgba(0,0,0,0.2);
        }
        .api-info{background:rgba(255,255,255,0.08);border-radius:8px;padding:12px;margin:8px 0;border-left:5px solid #667eea}
        code.small{display:block;background:rgba(0,0,0,0.3);padding:8px;border-radius:6px;margin-top:6px;font-family:monospace;color:#fff}

        /* features */
        .features{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px;margin-top:24px}
        .feature{
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            padding:20px;border-radius:12px;text-align:center;
            transition: transform 0.3s ease, background 0.3s ease;
        }
        .feature:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.15);
        }

        /* modal (tÃ¼m apiler) */
        .modal-backdrop{
            position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:150;
            backdrop-filter: blur(5px);
        }
        .modal{
            width:95%;max-width:1000px;height:80vh;
            background: rgba(20,20,25,0.95);
            border: 1px solid rgba(255,255,255,0.1);
            color:#fff;border-radius:16px;padding:24px;box-shadow:0 30px 60px rgba(0,0,0,0.5);
            overflow:hidden;display:flex;flex-direction:column;
            backdrop-filter: blur(15px);
        }
        .modal-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding-bottom:16px;border-bottom:1px solid rgba(255,255,255,0.1)}
        .modal-title{font-weight:800;font-size:1.5rem}
        .modal-close{
            background:rgba(255,255,255,0.1);border:none;font-size:20px;cursor:pointer;
            width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;
            color:#fff;transition:background 0.2s ease;
        }
        .modal-close:hover{background:rgba(255,255,255,0.2)}
        .modal-body{flex:1;overflow:auto;padding-top:12px}
        .api-list{display:flex;flex-direction:column;gap:10px}
        .api-item{
            background:rgba(255,255,255,0.05);border-radius:10px;padding:16px;
            display:flex;gap:10px;align-items:center;justify-content:space-between;
            border: 1px solid rgba(255,255,255,0.08);
            transition: background 0.2s ease;
        }
        .api-item:hover {
            background: rgba(255,255,255,0.08);
        }
        .api-url{font-family:monospace;font-size:13px;color:#ddd;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .api-actions{display:flex;gap:8px;align-items:center}
        .pill{background:rgba(255,255,255,0.1);padding:6px 12px;border-radius:999px;font-size:12px;color:#ccc}

        /* responsive */
        @media (max-width:700px){
            .form-row{flex-direction:column}
            .api-url{white-space:normal}
            .api-item{flex-direction:column;align-items:flex-start;gap:12px}
            .api-actions{align-self:flex-end}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">NabiSystem</div>
            <div class="subtitle">Ultra VIP API OluÅŸturma Platformu â€” Hemen OluÅŸtur, Hemen Kullan</div>
        </div>

        <div class="warning-box">
            <strong>âš  Ã–NEMLÄ° UYARI:</strong> OluÅŸturulan API'de ve sonuÃ§larda hiÃ§bir yerde NabiSystem yazÄ±larÄ± gÃ¶rÃ¼nmez. Hizmet Ã¼cretsiz saÄŸlanmÄ±ÅŸtÄ±r.
        </div>

        <div class="api-form">
            <h2 style="margin-bottom:12px">API OluÅŸtur</h2>
            <div class="form-row">
                <input id="kullaniciAdi" class="form-input" placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin (Ã¶rn: eymen)" />
                <div style="display:flex;gap:8px;">
                    <button id="olusturBtn" class="btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="#111" stroke-width="2" stroke-linecap="round"/></svg>
                        <span id="btnText">API OluÅŸtur</span>
                    </button>
                    <button id="showAllBtn" class="btn secondary" title="TÃ¼m API'leri gÃ¶ster">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 7h18M3 12h18M3 17h18" stroke="#111" stroke-width="1.6" stroke-linecap="round"/></svg>
                        TÃ¼m API'ler
                    </button>
                </div>
            </div>

            <div id="resultBox" class="result-box" aria-live="polite">
                <h3 style="margin-bottom:8px">ðŸŽ‰ API'niz BaÅŸarÄ±yla OluÅŸturuldu!</h3>

                <div class="api-info">
                    <strong>API AdÄ±:</strong> <span id="apiName">-</span>
                </div>
                <div class="api-info">
                    <strong>API Key:</strong> <span id="apiKey">-</span>
                </div>
                <div class="api-info">
                    <strong>Base URL:</strong> <span id="baseUrl">-</span>
                </div>
                <div class="api-info">
                    <strong>Ã–rnek KullanÄ±m:</strong>
                    <code id="exampleUsage" class="small">-</code>
                </div>
            </div>
        </div>

        <div class="features" aria-hidden="false">
            <div class="feature">
                <div style="font-size:26px;margin-bottom:8px">ðŸ”’</div>
                <div style="font-weight:700">Ultra GÃ¼venli</div>
                <div style="opacity:.85;margin-top:6px">API anahtar yÃ¶netimi ve rate-limit</div>
            </div>
            <div class="feature">
                <div style="font-size:26px;margin-bottom:8px">âš¡</div>
                <div style="font-weight:700">HÄ±zlÄ±</div>
                <div style="opacity:.85;margin-top:6px">Hafif ve hÄ±zlÄ± yÃ¶nlendirme</div>
            </div>
            <div class="feature">
                <div style="font-size:26px;margin-bottom:8px">ðŸ”„</div>
                <div style="font-weight:700">50+ Endpoint</div>
                <div style="opacity:.85;margin-top:6px">Ã‡ok sayÄ±da hazÄ±r sorgu Ã¶rneÄŸi</div>
            </div>
            <div class="feature">
                <div style="font-size:26px;margin-bottom:8px">ðŸŽ¯</div>
                <div style="font-weight:700">VIP Kalite</div>
                <div style="opacity:.85;margin-top:6px">Profesyonel gÃ¶rÃ¼nÃ¼m ve deneyim</div>
            </div>
        </div>
    </div>

    <!-- Modal for showing all APIs -->
    <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal" role="document">
            <div class="modal-header">
                <div>
                    <div class="modal-title">TÃ¼m API Ã–rnekleri</div>
                    <div style="font-size:13px;color:#aaa;margin-top:6px">AÅŸaÄŸÄ±daki listede API'niz oluÅŸturulduysa anahtar ve isim otomatik yerleÅŸir.</div>
                </div>
                <div style="display:flex;gap:8px;align-items:center">
                    <button id="modalClose" class="modal-close" aria-label="Kapat">âœ•</button>
                </div>
            </div>
            <div class="modal-body">
                <div style="margin-bottom:10px;display:flex;gap:8px;flex-wrap:wrap;align-items:center">
                    <input id="filterInput" placeholder="Arama... (Ã¶rn: tc, whois, ip)" style="flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.08); color:#fff" />
                    <button class="btn small" onclick="copyAll()">TÃ¼mÃ¼nÃ¼ Kopyala</button>
                </div>

                <div id="apiList" class="api-list" aria-live="polite"></div>
            </div>
        </div>
    </div>

    <script>
        // DÃœZELTÄ°LMÄ°Åž URL ÅžABLONLARI - DOÄžRU FORMAT
        const apiTemplates = [
            "https://x.sorgu-api.rf.gd/API_NAME/ad_soyad?api_key=API_KEY&ad=ORHAN&soyad=KAYA",
            "https://x.sorgu-api.rf.gd/API_NAME/tc_sorgulama?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/telegram?api_key=API_KEY&kullanici=ornekkullanici",
            "https://x.sorgu-api.rf.gd/API_NAME/ip?api_key=API_KEY&domain=google.com",
            "https://x.sorgu-api.rf.gd/API_NAME/dns?api_key=API_KEY&domain=google.com",
            "https://x.sorgu-api.rf.gd/API_NAME/whois?api_key=API_KEY&domain=google.com",
            "https://x.sorgu-api.rf.gd/API_NAME/sifre_encrypt?api_key=API_KEY&method=md5&password=123456",
            "https://x.sorgu-api.rf.gd/API_NAME/subdomain?api_key=API_KEY&url=google.com",
            "https://x.sorgu-api.rf.gd/API_NAME/hava_durumu?api_key=API_KEY&sehir=istanbul",
            "https://x.sorgu-api.rf.gd/API_NAME/e_kurs?api_key=API_KEY&tc=11111111101&okulno=12345",
            "https://x.sorgu-api.rf.gd/API_NAME/tc_pro_sorgulama?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/ehliyet?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/ip_premium?api_key=API_KEY&domain=google.com",
            "https://x.sorgu-api.rf.gd/API_NAME/ada_parsel?api_key=API_KEY&il=istanbul&ada=5&parsel=10",
            "https://x.sorgu-api.rf.gd/API_NAME/sertifika2?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/vergi_levhasi?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/facebook_hanedan?api_key=API_KEY&ad=MEHMET&soyad=YILMAZ",
            "https://x.sorgu-api.rf.gd/API_NAME/diploma?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/internet?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/interpol?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/sehit?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/gsm_tc?api_key=API_KEY&gsm=5551234567",
            "https://x.sorgu-api.rf.gd/API_NAME/tc_gsm?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/operator?api_key=API_KEY&gsm=5551234567",
            "https://x.sorgu-api.rf.gd/API_NAME/aile?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/aile_pro?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/es?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/sulale?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/lgs?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/lgs_hanedan?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/uni?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/okulno_hanedan?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/vergi_no?api_key=API_KEY&vergi=1234567890",
            "https://x.sorgu-api.rf.gd/API_NAME/firma?api_key=API_KEY&unvan=ORNEK%20FIRMA",
            "https://x.sorgu-api.rf.gd/API_NAME/sgk2?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/secmen?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/ogretmen?api_key=API_KEY&ad=AYÅžE&soyad=DEMÄ°R",
            "https://x.sorgu-api.rf.gd/API_NAME/yabanci?api_key=API_KEY&ad=JOHN&soyad=SMITH",
            "https://x.sorgu-api.rf.gd/API_NAME/log?api_key=API_KEY&site=orneksite.com",
            "https://x.sorgu-api.rf.gd/API_NAME/vesika2?api_key=API_KEY&tc=11111111101",
            "https://x.sorgu-api.rf.gd/API_NAME/tapu2?api_key=API_KEY&tc=11111111101"
        ];

        let currentApiKey = null;
        let currentApiName = null;

        // ELEMENTLER
        const olusturBtn = document.getElementById('olusturBtn');
        const btnText = document.getElementById('btnText');
        const resultBox = document.getElementById('resultBox');
        const apiKeyEl = document.getElementById('apiKey');
        const apiNameEl = document.getElementById('apiName');
        const baseUrlEl = document.getElementById('baseUrl');
        const exampleUsageEl = document.getElementById('exampleUsage');

        // modal elemanlarÄ±
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modalClose = document.getElementById('modalClose');
        const showAllBtn = document.getElementById('showAllBtn');
        const apiListEl = document.getElementById('apiList');
        const filterInput = document.getElementById('filterInput');

        // Modal open/close
        showAllBtn.addEventListener('click', () => { renderApiList(); openModal(); });
        modalClose.addEventListener('click', closeModal);
        modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop) closeModal(); });
        function openModal(){ modalBackdrop.style.display='flex'; modalBackdrop.setAttribute('aria-hidden','false'); }
        function closeModal(){ modalBackdrop.style.display='none'; modalBackdrop.setAttribute('aria-hidden','true'); }

        // Filtreleme
        filterInput.addEventListener('input', () => renderApiList(filterInput.value.trim().toLowerCase()));

        // API OluÅŸtur (form submit)
        olusturBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            const kullaniciAdi = document.getElementById('kullaniciAdi').value.trim();
            if(!kullaniciAdi){ alert('LÃ¼tfen bir kullanÄ±cÄ± adÄ± girin'); return; }

            btnText.textContent = 'OluÅŸturuluyor...';
            olusturBtn.disabled = true;

            try {
                const body = new URLSearchParams();
                body.append('kullanici_adi', kullaniciAdi);

                const resp = await fetch('/api_olustur', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: body.toString()
                });

                const data = await resp.json();

                if(data.ok){
                    currentApiKey = data.api_key || data.apiKey || data.apiKeyGenerated || null;
                    currentApiName = data.api_name || data.apiName || kullaniciAdi.toLowerCase();

                    const baseUrl = data.your_base_url || `/${currentApiName}`;

                    // GÃ¼ncelle UI
                    apiKeyEl.textContent = currentApiKey || '-';
                    apiNameEl.textContent = currentApiName || '-';
                    baseUrlEl.textContent = baseUrl;

                    let example = apiTemplates.length ? apiTemplates[0] : `https://x.sorgu-api.rf.gd/API_NAME/ad_soyad?api_key=API_KEY&ad=ORHAN&soyad=KAYA`;
                    example = example.replace(/API_KEY/g, currentApiKey || 'API_KEY').replace(/API_NAME/g, currentApiName || 'API_NAME');
                    exampleUsageEl.textContent = example;

                    resultBox.style.display = 'block';
                    resultBox.scrollIntoView({behavior:'smooth'});
                } else {
                    alert('Hata: ' + (data.message || 'Bilinmeyen hata'));
                }
            } catch(err){
                alert('Sunucuya baÄŸlanÄ±rken hata: ' + err);
            } finally {
                btnText.textContent = 'API OluÅŸtur';
                olusturBtn.disabled = false;
            }
        });

        // Modal iÃ§eriÄŸini oluÅŸtur
        function renderApiList(filter=''){
            apiListEl.innerHTML = '';
            const showKey = !!currentApiKey && !!currentApiName;
            const filled = apiTemplates.map(t => {
                return t.replace(/API_KEY/g, showKey ? currentApiKey : 'API_KEY').replace(/API_NAME/g, showKey ? currentApiName : 'API_NAME');
            });

            let count = 0;
            for(const url of filled){
                if(filter && !url.toLowerCase().includes(filter)) continue;
                count++;
                const item = document.createElement('div');
                item.className = 'api-item';

                const left = document.createElement('div');
                left.style.flex = '1 1 auto';
                left.style.marginRight = '10px';

                const urlEl = document.createElement('div');
                urlEl.className = 'api-url';
                urlEl.textContent = url;

                const meta = document.createElement('div');
                meta.style.marginTop = '6px';
                meta.innerHTML = `<span class="pill">${url.split('/').pop()?.split('?')[0] || ''}</span>`;

                left.appendChild(urlEl);
                left.appendChild(meta);

                const actions = document.createElement('div');
                actions.className = 'api-actions';

                const copyBtn = document.createElement('button');
                copyBtn.className = 'btn secondary btn-small';
                copyBtn.textContent = 'Kopyala';
                copyBtn.addEventListener('click', ()=> {
                    navigator.clipboard.writeText(url).then(()=> {
                        copyBtn.textContent = 'KopyalandÄ±';
                        setTimeout(()=> copyBtn.textContent = 'Kopyala', 1200);
                    }).catch(()=> alert('Kopyalama baÅŸarÄ±sÄ±z'));
                });

                const openBtn = document.createElement('button');
                openBtn.className = 'btn btn-small';
                openBtn.textContent = 'AÃ§';
                openBtn.addEventListener('click', ()=> window.open(url, '_blank'));

                actions.appendChild(copyBtn);
                actions.appendChild(openBtn);

                item.appendChild(left);
                item.appendChild(actions);

                apiListEl.appendChild(item);
            }

            if(count === 0){
                const no = document.createElement('div');
                no.style.padding = '18px';
                no.style.textAlign = 'center';
                no.style.color = '#aaa';
                no.textContent = showKey ? 'Filtreye uyan API yok.' : 'API oluÅŸturduktan sonra Ã¶rnek URL\'leriniz burada anahtar ile gÃ¶rÃ¼necek.';
                apiListEl.appendChild(no);
            }
        }

        // kopyala tÃ¼mÃ¼nÃ¼
        function copyAll(){
            const nodes = Array.from(apiListEl.querySelectorAll('.api-url'));
            if(nodes.length===0){ alert('Kopyalanacak URL yok'); return; }
            const text = nodes.map(n=>n.textContent).join('\n');
            navigator.clipboard.writeText(text).then(()=> alert('TÃ¼m URL\'ler kopyalandÄ±'));
        }

        // EÄŸer sayfa aÃ§Ä±lÄ±rken session'da doluysa (Ã¶r: kullanÄ±cÄ± zaten oluÅŸturdu) listede gÃ¶ster
        document.addEventListener('DOMContentLoaded', ()=> {
            renderApiList();
        });
    </script>
</body>
</html>
